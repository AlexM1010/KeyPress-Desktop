name: Wails macOS Build

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  macos-build:
    runs-on: macos-latest
    steps:
      # Checkout repository
      - name: Checkout code
        uses: actions/checkout@v2

      # Use the Wails Build Action for macOS
      - name: Build Wails Application for macOS
        uses: dAppServer/wails-build-action@v2.2
        with:
          build-name: myWailsApp
          build-platform: darwin/universal
          package: false # Disable artifact uploading since this is for sharing locally

      # Optional: Archive the build for download (if needed)
      - name: Archive macOS Build
        run: |
          mkdir -p artifact
          mv ./build/bin/* artifact/
        # Upload as GitHub Actions artifact
      - name: Upload Build Artifact
        uses: actions/upload-artifact@v3
        with:
          name: macos-build
          path: artifact
